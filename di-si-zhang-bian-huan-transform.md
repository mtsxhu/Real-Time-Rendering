# 第四章 · 变换 Transform

&#x20;       变换是一种操作，它采用点、向量或颜色等实体，并以某种方式对它们进行转换。对于计算机图形的实践者来说，掌握变换是极其重要的。使用它们，您可以定位、重塑和动画对象、灯光和相机。您还可以确保所有计算都在相同的坐标系中执行，并以不同的方式将对象投影到一个平面上。这些只是转换可以执行的少数操作，但它们足以证明转换在实时图形，或就此而言，在任何类型的计算机图形中所扮演的角色的重要性。线性变换是一种保持向量加法和标量乘法的变换。具体地说：

![](.gitbook/assets/Snipaste\_2021-10-06\_16-52-56.png)

&#x20;        例如，f(x) = 5x是一个变换，它取一个向量并将每个元素乘以5。为了证明这是线性的，需要满足两个条件(方程4.1和4.2)。第一个条件成立，因为任意两个向量乘以5然后相加，就等于两个向量相加然后相乘。显然满足标量乘法条件(式4.2)。这个函数称为缩放变换，因为它改变对象的比例(大小)。旋转变换是另一个关于原点旋转矢量的线性变换。缩放和旋转变换，实际上所有的三元素向量的线性变换，都可以用一个3 x 3矩阵来表示。

&#x20;       然而，这个矩阵的大小通常不够大。 三元素向量 x 的函数，例如 f(x) = x + (7, 3, 2) 不是线性的。 在两个单独的向量上执行此函数会将 (7, 3, 2) 的每个值相加两次以形成结果。 将固定向量添加到另一个向量会执行平移，例如，它将所有位置移动相同的量。 这是一种有用的变换类型，我们希望结合各种变换，例如，将对象缩放为原来的一半，然后将其移动到不同的位置。 保持目前使用的简单形式的函数很难将它们结合起来。

&#x20;       结合线性变换和平移可以使用仿射变换来完成，通常存储为一个4 - 4矩阵。仿射变换是先执行线性变换再执行平移的变换。为了表示四个元素的向量，我们使用齐次符号，以同样的方式表示点和方向(使用黑体小写字母)。一个方向向量表示为v = (vx vy vz0)T，一个点表示为v = (vx vy vz1)T。在整个章节中，我们将广泛使用在可下载的线性代数附录中解释的术语和操作，在realtimerendering.com上找到。

&#x20;       所有的平移、旋转、缩放、镜像和裁剪矩阵都是仿射矩阵。仿射矩阵的主要特征是保持直线的平行性，但不一定保持长度和角度。仿射变换也可以是单个仿射变换的串联序列。

&#x20;       本章将从最基本、最基本的仿射变换开始。本节可视为简单转换的参考手册。然后描述更专门的矩阵，然后讨论和描述四元数，一个强大的转换工具。然后是顶点混合和变形，这是两种简单而有效的表示网格动画的方法。最后，对投影矩阵进行了描述。表4.1总结了大多数这些变换及其表示法、函数和性质，其中正交矩阵的逆矩阵是转置矩阵。

&#x20;       变换是操作几何的基本工具。大多数图形应用程序编程接口允许用户设置任意矩阵，有时一个库可以用于实现本章讨论的许多变换的矩阵运算。然而，理解函数调用背后的实际矩阵及其相互作用仍然是值得的。知道这个矩阵在函数调用之后做了什么是一个开始，但是理解矩阵本身的性质会让你走得更远。例如，当你在处理一个正交矩阵时，这样的理解使你能够分辨出它的逆是它的转置，从而使矩阵的逆更快。这样的知识可以加速代码。

4.1. 基本变换 Basic Transforms
